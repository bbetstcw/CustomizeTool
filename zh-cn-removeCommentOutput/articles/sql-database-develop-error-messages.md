<properties 
	pageTitle="SQL 数据库客户端程序的错误消息"
	description="本文针对每种错误提供了数字 ID 和文本消息。如果觉得合适，你可以自由交叉参考你自己的更友好错误消息文本。"
	services="sql-database"
	documentationCenter=""
	authors="MightyPen"
	manager="jeffreyg"
	editor="" />


<tags 
	ms.service="sql-database" 
	ms.date="08/21/2015" 
	wacn.date="09/15/2015"/>


# SQL 数据库客户端程序的错误消息


<!--
Old Title on MSDN:  Error Messages (Azure SQL Database)
ShortId on MSDN:  ff394106.aspx
Dx 4cff491e-9359-4454-bd7c-fb72c4c452ca
-->


本主题列出了多种类别的错误消息。大多数类别特定于 Azure SQL 数据库，并不适用于 Microsoft SQL Server。


在客户端程序中，你可以针对任何给定的错误，选择为用户提供由你自定义的替代消息。


**提示：***暂时性故障错误*部分非常重要。这些错误应该提示客户端程序运行你设计的*重试*逻辑来重试操作。


<a id="bkmk_connection_errors" name="bkmk_connection_errors">&nbsp;</a>


## 暂时性故障、连接断开和其他暂时性错误

下表介绍连接断开错误和其他暂时性错误，你在 Internet 上使用 Azure SQL 数据库时可能会遇到这些错误。

暂时性错误也称为暂时性故障。当程序捕获 `SqlException` 时，可以检查 `sqlException.Number` 值是否为本部分中列出的暂时性故障值。如果 `Number` 值指示暂时性故障，程序可以重试建立连接，然后重试通过连接进行查询。有关重试逻辑的代码示例，请参阅：


- [SQL Database 的客户端开发和快速入门代码示例](/documentation/articles/sql-database-develop-quick-start-client-code-samples)

- [如何：可靠地连接到 Azure SQL 数据库](http://msdn.microsoft.com/zh-cn/library/azure/dn864744.aspx)


| 错误号 | 严重性 | 说明 |
| ---: | ---: | :--- |
| 4060 | 16 | 无法打开该登录请求的数据库“%.&#x2a;ls”。登录失败。 |
|10928|20|资源 ID: %d。数据库的 %s 限制是 %d 且已达到该限制。有关详细信息，请参阅 [http://www.windowsazure.cn/documentation/articles/sql-database-resource-limits](/documentation/articles/sql-database-resource-limits)。<br/><br/>资源 ID 指明已达到限制的资源。对于工作线程，资源 ID = 1。对于会话，资源 ID = 2。<br/><br/>注意：有关此错误以及如何解决它的详细信息，请参阅：<br/>[Azure SQL 数据库资源调控](http://msdn.microsoft.com/zh-cn/library/azure/dn338078.aspx)。 |
|10929|20|资源 ID: %d。%s 最小保证为 %d，最大限制为 %d，数据库的当前使用率为 %d。但是，服务器当前太忙，无法支持针对该数据库的数目大于 %d 的请求。有关详细信息，请参阅 [http://www.windowsazure.cn/documentation/articles/sql-database-resource-limits](/documentation/articles/sql-database-resource-limits)。否则，请稍后重试。<br/><br/>资源 ID 指明已达到限制的资源。对于工作线程，资源 ID = 1。对于会话，资源 ID = 2。<br/><br/>注意：有关此错误以及如何解决它的详细信息，请参阅：<br/>[Azure SQL 数据库资源调控](http://msdn.microsoft.com/zh-cn/library/azure/dn338078.aspx)。|
|40197|17|该服务在处理你的请求时遇到错误。请稍后重试。错误代码 %d。<br/><br/>当服务由于软件或硬件升级、硬件故障或任何其他故障转移问题而关闭时，你将收到此错误。错误 40197 的消息中嵌入的错误代码 (%d) 提供有关所发生的故障或故障转移类型的其他信息。错误 40197 的消息中嵌入的错误代码的一些示例为 40020、40143、40166 和 40540。<br/><br/>重新连接到 SQL 数据库服务器会自动将你连接到数据库的正常运行的副本。应用程序必须捕获错误 40197，记录该消息中嵌入的错误代码 (%d) 以供进行故障排除，然后尝试重新连接到 SQL 数据库，直到资源可用且再次建立连接为止。|
|40501|20|服务当前正忙。请在 10 秒钟后重试请求。事件 ID: %ls。代码: %d。<br/><br/>注意：有关此错误和如何对返回的代码进行解码的详细信息，请参阅：<br/>[Azure SQL 数据库限制](http://msdn.microsoft.com/zh-cn/library/azure/dn338079.aspx)。
|40613|17|数据库“%.&#x2a;ls”（在服务器“%.&#x2a;ls”上）当前不可用。请稍后重试连接。如果问题仍然存在，请与客户支持人员联系，并向其提供“%.&#x2a;ls”的会话追踪 ID。|
|49918|16|无法处理请求。没有足够的资源，无法处理该请求。<br/><br/>服务当前正忙。请稍后重试请求。 |
|49919|16|无法处理创建或更新请求。为订阅“%ld”处理的创建或更新请求过多。<br/><br/>服务正忙于处理订阅或服务器的多个创建或更新请求。为了优化资源，当前阻止了请求。请查询 [sys.dm\_operation\_stats](https://msdn.microsoft.com/zh-cn/library/dn270022.aspx) 以了解挂起的操作。请等到挂起的创建或更新请求完成，或删除其中一个挂起的请求，然后重试请求。 |
|49920|16|无法处理请求。为订阅“%ld”执行的操作过多。<br/><br/>服务正忙于处理此订阅的多个请求。为了优化资源，当前阻止了请求。请查询 [sys.dm\_operation\_stats](https://msdn.microsoft.com/zh-cn/library/dn270022.aspx) 以了解操作统计信息。请等到挂起的请求完成，或删除其中一个挂起的请求，然后重试请求。 |

**注意：**建议在你的重试逻辑中包含联合身份验证错误 10053 和 10054。


## 数据库复制错误


下表包含了你在 Azure SQL 数据库中复制数据库时你可能会遇到的不同错误。有关详细信息，请参阅[在 Azure SQL 数据库中复制数据库](http://msdn.microsoft.com/zh-cn/library/azure/ff951624.aspx)。


|错误号|严重性|说明|
|---:|---:|:---|
|40635|16|IP 地址为“%.&#x2a;ls”的客户端已被暂时禁用。|
|40637|16|创建数据库副本当前被禁用。|
|40561|16|数据库复制失败。源数据库或目标数据库不存在。|
|40562|16|数据库复制失败。源数据库已删除。|
|40563|16|数据库复制失败。目标数据库已删除。|
|40564|16|数据库复制由于内部错误而失败。请删除目标数据库，然后重试。|
|40565|16|数据库复制失败。不允许来自同一源的多个并发数据库复制。请删除目标数据库，然后重试。|
|40566|16|数据库复制由于内部错误而失败。请删除目标数据库，然后重试。|
|40567|16|数据库复制由于内部错误而失败。请删除目标数据库，然后重试。|
|40568|16|数据库复制失败。源数据库已变得不可用。请删除目标数据库，然后重试。|
|40569|16|数据库复制失败。目标数据库已变得不可用。请删除目标数据库，然后重试。|
|40570|16|数据库复制由于内部错误而失败。请删除目标数据库，然后重试。|
|40571|16|数据库复制由于内部错误而失败。请删除目标数据库，然后重试。|


## 资源调控控制


下表包含了在使用 Azure SQL 数据库时过度使用资源所造成的错误。例如：


- 事务打开的时间可能过长。
- 事务可能持有过多的锁。
- 程序可能消耗了过多的内存。
- 程序可能消耗了过多的 `TempDb` 空间。


**提示：**以下链接提供适用于本部分中的大多数或所有错误的详细信息：


- [Azure SQL 数据库资源限制](http://msdn.microsoft.com/zh-cn/library/azure/dn338081.aspx)。


|错误号|严重性|说明|
|---:|---:|:---|
|40544|20|数据库已达到大小配额。请将数据分区或删除、删除索引或查阅文档以找到可能的解决方案。|
|40549|16|由于你有长时间运行的事务，已终止会话。请尝试缩短事务运行时间。|
|40550|16|由于会话获取的锁过多，已终止该会话。请尝试在单个事务中读取或修改更少的行。|
|40551|16|会话已由于过多的 `TEMPDB` 使用而终止。请尝试修改你的查询以减少使用临时表空间。<br/><br/>提示：如果你在使用临时对象，则通过在会话不再需要临时对象后删除这些临时对象，可以节省 `TEMPDB` 数据库中的空间。|
|40552|16|由于过度使用事务日志空间，已终止该会话。请尝试在单个事务中修改更少的行。<br/><br/>提示：如果你在使用 `bcp.exe` 实用工具或 `System.Data.SqlClient.SqlBulkCopy` 类执行大容量插入，则尝试使用 `-b batchsize` 或 `BatchSize` 选项限制在各事务中复制到服务器的行数。如果你正在使用 `ALTER INDEX` 语句重新生成索引，请尝试使用 `REBUILD WITH ONLINE = ON` 选项。|
|40553|16|由于过度使用内存，已终止该会话。请尝试修改你的查询以处理更少的行。<br/><br/>提示：在你的 Transact-SQL 代码中减少 `ORDER BY` 和 `GROUP BY` 操作数可以帮助降低查询的内存要求。|


有关此错误以及如何解决它的详细信息，请参阅：


- [Azure SQL 数据库资源调控](http://msdn.microsoft.com/zh-cn/library/azure/dn338078.aspx)。


## 联合错误


下表介绍在使用联合时可能遇到的错误。有关详细信息，请参阅[管理数据库联合（Azure SQL 数据库）](http://msdn.microsoft.com/zh-cn/library/azure/hh597455.aspx)。


> [AZURE.IMPORTANT]联合的当前实现将随 Web 和企业服务层一起停用。Azure SQL 数据库版本 V12 不支持 Web 和企业服务层。
> 
> 弹性缩放功能旨在让你以最小的工作量创建分片应用程序。
> 
> 有关弹性伸缩的详细信息，请参阅 [Azure SQL 数据库弹性缩放主题](/documentation/articles/sql-database-elastic-scale-documentation-map)。请考虑部署自定义分片解决方案，以最大限度地提高可缩放性、灵活性和性能。有关自定义分片的详细信息，请参阅[向外扩展 Azure SQL 数据库](http://msdn.microsoft.com/zh-cn/library/azure/dn495641.aspx)。


|错误号|严重性|说明|缓解措施|
|---:|---:|:---|:---|
|266|16|在多语句事务中不允许使用 <statement> 语句|在发出该语句之前，检查连接上的 `@@trancount` 是否为 0。|
|2072|16|数据库“%.&#x2a;ls”不存在|在发出 `USE FEDERATION` 之前，检查 `sys.databases` 以了解数据库状态。|
|2209|16|“%ls”附近有 %s 语法错误|`FEDERATED ON` 仅可以在联合成员中创建表时使用。|
|2714|16|数据库中已存在名为“%.&#x2a;ls”的对象|联合名称已存在。|
|10054、10053|20|在接收来自服务器的结果时发生传输级错误。主机上的软件已中止建立的连接|在应用程序中实现重试逻辑|
|40530|15|<statement> 需是批处理中的唯一语句|确保批处理中不存在其他语句|
|40604|16|由于将超过服务器的配额，无法执行 `CREATE DATABASE`|扩展服务器 db 计数配额|
|45000|16|<statement> 操作失败。指定的联合名称 <federation_name> 无效|Federation\_name 不符合联合名称规则或不是有效标识符|
|45001|16|<statement> 操作失败。指定的联合名称不存在|联合名称不存在|
|45002|16|<statement> 操作失败。指定的键名称 <distribution_name> 无效|联合键不存在或无效|
|45004|16|<statement> 操作失败。指定的值对于联合键 <distribution_name> 和联合 <federation_name> 无效|`USE FEDERATION`：使用联合键数据类型域中的边界值，或使用非 NULL 的边界值。<br/><br/>`ALTER FEDERATION SPLIT`：使用尚不是现有拆分点的联合键域中的有效值。<br/><br/>`ALTER FEDERATION DROP`：使用已是拆分点的联合键域中的有效值。|
|45005|16|当正在对联合 <federation_name> 和 ID 为 <member_id> 的成员进行其他联合操作时，无法运行 <statement>|等待并发操作完成。|
|45006|16|<statement> 操作失败。联合成员中不允许使用引用了联合表的引用表中的外键关系|不支持。|
|45007|16|<statement> 操作失败。联合表之间的外键关系必须包含联合键列。|不支持|
|45008|16|<statement> 操作失败。联合键数据类型与列数据类型不匹配|不支持。|
|45009|16|<statement> 操作失败。此操作在筛选连接上不受支持|不支持。|
|45010|16|<statement> 操作失败。不能更新联合键|不支持。|
|45011|16|<statement> 操作失败。不能更新联合键架构|不支持。|
|45012|16|为联合键指定的值无效|值必须在连接寻址的范围内。<br/><br/>如果已进行筛选，则为指定的联合键值。<br/><br/>如果未进行筛选，则为联合成员所涵盖的范围。|
|45013|16|在另一个用户名下已经存在该 SID|从联合根中同一用户帐户的 SID 复制联合成员中某个用户的 SID。某些情况下，该 SID 可能已在使用中。|
|45014|16|%ls 在 %ls 上不受支持|不支持的操作。|
|45022|16|<statement> 操作失败。联合键 <distribution_name> 和联合 <federation_name> 已存在指定的边界值|指定一个已是边界值的值。|
|45023|16|<statement> 操作失败。联合键 <distribution_name> 和联合 <federation_name> 不存在指定的边界值|指定一个尚不是边界值的值。|


## 常规错误


下表列出了不属于任何前一类别的所有常规错误。


|错误号|严重性|说明|
|---:|---:|:---|
|15006|16|<AdministratorLogin> 不是有效的名称，因为它包含无效字符。|
|18452|14|登录失败。该登录名来自不受信任的域，不能用于 Windows 身份验证。%.&#x2a;ls（此版本的 SQL Server 不支持 Windows 登录名。）|
|18456|14|用户“%.&#x2a;ls”的登录失败。%.&#x2a;ls%.&#x2a;ls（用户“%.&#x2a;ls”的登录失败。密码更改失败。此版本的 SQL Server 不支持在登录过程中更改密码。）|
|18470|14|用户“%.&#x2a;ls”的登录失败。原因：该帐户已禁用。%.&#x2a;ls|
|40014|16|不能在同一个事务中使用多个数据库。|
|40054|16|此版本的 SQL Server 不支持没有聚集索引的表。创建聚集索引，然后重试。|
|40133|15|此版本的 SQL Server 不支持此操作。|
|40506|16|指定的 SID 对此版本的 SQL Server 无效。|
|40507|16|不能使用此版本的 SQL Server 中的参数调用“%.&#x2a;ls”。|
|40508|16|USE 语句不支持在数据库间切换。请使用新连接来连接到其他数据库。|
|40510|16|此版本的 SQL Server 不支持语句“%.&#x2a;ls”|
|40511|16|此版本的 SQL Server 不支持内置函数“%.&#x2a;ls”。|
|40512|16|此版本的 SQL Server 不支持已过时的功能“%ls”。|
|40513|16|此版本的 SQL Server 不支持服务器变量“%.&#x2a;ls”。|
|40514|16|此版本的 SQL Server 不支持“%ls”。|
|40515|16|此版本的 SQL Server 不支持引用“%.&#x2a;ls”中的数据库和/或服务器名称。|
|40516|16|此版本的 SQL Server 不支持全局临时对象。|
|40517|16|此版本的 SQL Server 不支持关键字或语句选项“%.&#x2a;ls”。|
|40518|16|此版本的 SQL Server 不支持 DBCC 命令“%.&#x2a;ls”。|
|40520|16|此版本的 SQL Server 不支持安全对象类“%S\_MSG”。|
|40521|16|此版本的 SQL Server 不支持服务器范围中的安全对象类“%S\_MSG”。|
|40522|16|此版本的 SQL Server 不支持数据库主体“%.&#x2a;ls”类型。|
|40523|16|此版本的 SQL Server 不支持创建隐式用户“%.&#x2a;ls”。请在使用该用户前显式创建它。|
|40524|16|此版本的 SQL Server 不支持数据类型“%.&#x2a;ls”。|
|40525|16|此版本的 SQL Server 不支持 WITH“%.ls”。|
|40526|16|此版本的 SQL Server 不支持“%.&#x2a;ls”行集提供程序。|
|40527|16|此版本的 SQL Server 不支持链接服务器。|
|40528|16|此版本的 SQL Server 用户不能映射为证书、非对称密钥或 Windows 登录名。|
|40529|16|此版本的 SQL Server 不支持模拟上下文中的内置函数“%.&#x2a;ls”。|
|40532|11|无法打开该登录请求的服务器“%.&#x2a;ls”。登录失败。|
|40553|16|由于过度使用内存，已终止该会话。请尝试修改你的查询以处理更少的行。<br/><br/>注意：在你的 Transact-SQL 代码中减少 `ORDER BY` 和 `GROUP BY` 操作数可以帮助降低查询的内存要求。|
|40604|16|由于将超过服务器的配额，无法执行 CREATE/ALTER DATABASE。|
|40606|16|此版本的 SQL Server 不支持附加数据库。|
|40607|16|此版本的 SQL Server 不支持 Windows 登录名。|
|40611|16|服务器上最多可以定义 128 个防火墙规则。|
|40614|16|防火墙规则的开始 IP 地址不能超过结束 IP 地址。|
|40615|16|无法打开该登录请求的服务器“{0}”。不允许具有 IP 地址 '{1}' 的客户端访问服务器。若要允许访问，请使用 SQL 数据库门户，或者对 master 数据库运行 sp\_set\_firewall\_rule 以便为此 IP 地址或地址范围创建防火墙规则。为使此更改生效，最多可能需要 5 分钟。|
|40617|16|以 <rule name> 开头的防火墙规则名称过长。最大长度为 128。|
|40618|16|防火墙规则名称不能为空。|
|40620|16|用户“%.&#x2a;ls”的登录失败。密码更改失败。此版本的 SQL Server 不支持在登录过程中更改密码。|
|40627|20|正在对服务器“{0}”和数据库 '{1}' 进行操作。请等待几分钟，然后重试。|
|40630|16|密码验证失败。该密码太短，不符合策略要求。|
|40631|16|指定的密码过长。密码的长度不能超过 128 个字符。|
|40632|16|密码验证失败。该密码不够复杂，不符合策略要求。|
|40636|16|无法在此操作中使用保留的数据库名称“%.&#x2a;ls”。|
|40638|16|订阅 ID <subscription-id> 无效。订阅不存在。|
|40639|16|请求不符合架构: <schema error>。|
|40640|20|服务器遇到意外的异常。|
|40641|16|指定的位置无效。|
|40642|17|服务器当前太忙。请稍后重试。|
|40643|16|指定的 x-ms-version 标头值无效。|
|40644|14|授权访问指定的订阅失败。|
|40645|16|服务器名称 <servername> 不能为空或 null。它只能由小写字母“a”-“z”、数字 0-9 和连字符组成。连字符不能位于名称的开头或结尾。|
|40646|16|订阅 ID 不能为空。|
|40647|16|订阅 <subscription-id 不包含服务器 servername。|
|40648|17|执行了过多请求。请稍后重试。|
|40649|16|指定的内容类型无效。仅支持应用程序/xml。|
|40650|16|订阅 <subscription-id> 不存在或者不可供操作。|
|40651|16|无法创建服务器，因为订阅 <subscription-id> 被禁用。|
|40652|16|无法移动或创建服务器。订阅 <subscription-id> 将超出服务器配额。|
|40671|17|网关与管理服务之间的通信失败。请稍后重试。|
|45168|16|SQL Azure 系统负载过小，正在设置单个服务器的并发 DB CRUD 操作数（例如 create database）的上限。在错误消息中指定的服务器已超过最大并发连接数。请稍后重试。|
|45169|16|SQL Azure 系统负载过小，正在设置单个订阅的并发服务器 CRUD 操作数（例如 create server）的上限。在错误消息中指定的订阅已超过最大并发连接数，已拒绝请求。请稍后重试。|


## 相关链接

- [Azure SQL 数据库一般性的指导原则和限制](http://msdn.microsoft.com/zh-cn/library/azure/ee336245.aspx)
- [资源管理](http://msdn.microsoft.com/zh-cn/library/azure/dn338083.aspx)

<!---HONumber=69-->